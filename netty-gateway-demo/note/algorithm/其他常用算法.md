## 蓄水池采样算法
有的时候我们需要对不知道规模的数据集进行采样

比如：
1. 从一本很厚的电话簿中抽取 1000 人进行姓氏统计。
2. 从 Google 搜索 "Ken Thompson"，从中抽取 100 个结果查看哪些是今年的。

算法过程

终于要讲到蓄水池采样算法（Reservoir Sampling）了。先说一下算法的过程：

假设数据序列的规模为 n，需要采样的数量的为 k。

首先构建一个可容纳 k 个元素的数组，将序列的前 k 个元素放入数组中。

然后从第 k+i 个元素开始，以 k/(k+i) 的概率来决定该元素是否被替换到数组中（数组中的元素被替换的概率是相同的）。 
当遍历完所有元素之后，数组中剩下的元素即为所需采取的样本。

证明过程
对于第 i 个数（i≤k）。在 k 步之前，被选中的概率为 1。
当走到第 k+1 步时，被第 k+1 个元素替换的概率 = （k+1 个元素被选中的概率） * （i 被选中替换的概率），
即为 (k/(k+1))×(1/k)= 1/k+1。则被保留的概率为 1−(1/k+1)=k/(k+1)。

依次类推，不被 k+2 个元素替换的概率为 1−k/(k+2)×1/k=(k+1)/(k+2)。则运行到第 n 步时，被保留的概率 = 被选中的概率 * 不被替换的概率，即：

1× k/(k+1) × (k+1)/(k+2)×(k+2)/(k+3)×…×(n−1)/n=k/n

对于第 j 个数（j>k）。在第 j 步被选中的概率为 k/j。不被 j+1 个元素替换的概率为 1−k/j+1×1/k=j/j+1。则运行到第 n 步时，
被保留的概率 = 被选中的概率 * 不被替换的概率，即：

kj×jj+1×j+1j+2×j+2j+3×...×n−1n=kn

所以对于其中每个元素，被保留的概率都为 k/n.